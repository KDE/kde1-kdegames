# This is a sample Makefile.in

kde_libraries 	= @kde_libraries@
qt_libraries	= @qt_libraries@
top_builddir 	= ..
LIBTOOL 	= @LIBTOOL@
KDE_RPATH 	= @KDE_RPATH@
install_root    = @install_root@
exec_prefix     = @exec_prefix@
kde_datadir     = @kde_datadir@
kde_appsdir     = @kde_appsdir@
kde_bindir      = @kde_bindir@
kde_minidir     = @kde_minidir@
kde_icondir     = @kde_icondir@

# @CXXFLAGS@     : is set to -g -Wall (when debuging) or -O2 -Wall (when not)
# @all_includes@ : is set to all needed include paths for QT, KDE and X11
# -I.. 	         : needed for config.h
CXXFLAGS= @CXXFLAGS@ @all_includes@ -DHAVE_CONFIG_H -I..

# @LDFLAGS@    : is set to -s (when not debuging) for stripping
# @all_libra.@ : is set to all needed libraries paths for QT, KDE and X11
# you need also @LIBSOCKET@, if you link with -lkfm
LDFLAGS	= @LDFLAGS@ @all_libraries@ -lkdeui -lkdecore -lqt -lXext -lX11 -lm

# both are clear, I think
CXX     = @CXX@
MOC   	= @MOC@

############# INSTALL #################

install = @INSTALL@
INSTALL = $(install) -m 0755
INSTALL_DATA = $(install) -m 0644
INSTALL_DIR = $(install) -d -m 0755
INSTALL_DIR_PRIVATE = $(install) -d -m 0700

prefix = @prefix@
BINDIR = $(kde_bindir)
APPSDIR = $(kde_appsdir)/Games
ICONDIR = $(kde_icondir)
MINIDIR = $(kde_minidir)

########### File Formats ###########

.SUFFIXES: .cpp

.cpp.o:
	$(CXX) -c $(CXXFLAGS) $<

%.moc: %.h
	$(MOC) $< -o $@

########## Files #####################

HEADERS =	game.h trys.h rattler.h board.h\
		level.h ball.h snake.h\
		basket.h startroom.h lcdrange.h score.h\
		pixServer.h progress.h levels.h view.o keys.h

SOURCES = 	game.cpp trys.cpp rattler.cpp board.cpp\
		level.cpp ball.cpp snake.cpp\
		basket.cpp startroom.cpp lcdrange.cpp\
		score.cpp pixServer.cpp progress.cpp levels.cpp\
		view.cpp keys.cpp


OBJECTS = 	game.o trys.o rattler.o board.o\
		level.o ball.o snake.o\
		basket.o startroom.o lcdrange.o score.o\
		pixServer.o progress.o levels.o view.o keys.o


SRCMETA = 	mgame.cpp mrattler.cpp msnake.cpp  mtrys.cpp\
		mbasket.cpp mstartroom.cpp mlcdrange.cpp mscore.cpp\
	        mprogress.cpp mview.cpp mkeys.cpp

OBJMETA = 	mgame.o mrattler.o msnake.o  mtrys.o\
		mbasket.o mstartroom.o mlcdrange.o mscore.o\
		mprogress.o mview.o mkeys.o

TARGET	= 	ksnake

######### build rules ################

all: $(TARGET)

Makefile: Makefile.in
	cd .. && CONFIG_FILES=ksnake/$@ CONFIG_HEADERS= $(SHELL) ./config.status

$(TARGET):  $(OBJECTS) $(OBJMETA)
	$(LIBTOOL) --mode=link $(CXX) $(OBJECTS) $(OBJMETA) -o $(TARGET) $(LDFLAGS) $(KDE_RPATH)

clean:
	rm -f *.o *.bak *~ *% #*
	rm -f $(SRCMETA) $(TARGET)

distclean: clean
	rm -f Makefile

install: all
	$(INSTALL_DIR) $(BINDIR)
	$(INSTALL) $(TARGET) $(BINDIR)
	$(INSTALL_DIR) $(APPSDIR)
	$(INSTALL_DATA) ksnake.kdelnk $(APPSDIR)
	(cd doc && $(MAKE) install)
	(cd data && $(MAKE) install)
	$(INSTALL_DIR) $(ICONDIR)
	$(INSTALL_DATA) ksnake.xpm $(ICONDIR)
	$(INSTALL_DIR) $(MINIDIR)
	$(INSTALL_DATA) mini-ksnake.xpm $(MINIDIR)/ksnake.xpm

uninstall:
	-rm -f $(ICONDIR)/ksnake.xpm
	-rm -f $(MINIDIR)/ksnake.xpm
	-rm -f $(BINDIR)/$(TARGET)
	-rm -f $(APPSDIR)/ksnake.kdelnk
	(cd doc && $(MAKE) uninstall)
	(cd data && $(MAKE) uninstall)

####### Meta classes

mrattler.cpp: rattler.h
	$(MOC) -o $@ $<

msnake.cpp: snake.h
	$(MOC) -o $@ $<

mgame.cpp: game.h
	$(MOC) -o $@ $<

mtrys.cpp: trys.h
	$(MOC) -o $@ $<

mbasket.cpp: basket.h
	$(MOC) -o $@ $<

mstartroom.cpp: startroom.h
	$(MOC) -o $@ $<

mlcdrange.cpp: lcdrange.h
	$(MOC) -o $@ $<

mscore.cpp: score.h
	$(MOC) -o $@ $<

mbox.cpp: box.h
	$(MOC) -o $@ $<

mprogress.cpp: progress.h
	$(MOC) -o $@ $<

mview.cpp: view.h
	$(MOC) -o $@ $<

mkeys.cpp: keys.h
	$(MOC) -o $@ $<

# DO NOT DELETE THIS LINE -- make depend depends on it.
